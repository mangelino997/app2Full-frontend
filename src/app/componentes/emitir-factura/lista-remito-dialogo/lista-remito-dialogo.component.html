<div class="row justify-content-center padd-20">
    <h5>Lista de Remitos {{!data.esRemitoGeneral? 'Dador de Carga' : ''}}</h5>
    <div class="col-md-12 text-center">
        <form [formGroup]="formularioFiltro">
            <div class="row justify-content-center">
                <div class="col-md-2">
                    <div class="form-group has-float-label">
                        <label for="idViaje" class="tamanio-label">N째 Viaje</label>
                        <input id="idViaje" type="text" formControlName="numeroViaje" placeholder="00"
                            [textMask]="mascararEnteroSinDecimales(11)" (blur)="cambioNumeroViaje()"
                            class="form-control form-control-sm number-right" [disabled]="">
                    </div>
                </div>
                <div class="col-md-2" *ngIf="data.esRemitoGeneral">
                    <div class="form-group has-float-label ">
                        <label for="idRemito" class="tamanio-label">N째 Remito*</label>
                        <input id="idRemito" type="text" formControlName="numeroRemito" placeholder="00"
                            [textMask]="mascararEnteroSinDecimales(8)" [disabled]=""
                            class="form-control form-control-sm number-right">
                    </div>
                </div>
                <div class="col-md-3" *ngIf="!data.esRemitoGeneral">
                    <div class="form-group has-float-label">
                        <label for="idTramoRG" class="tamanio-label">Tramo</label>
                        <mat-select id="idTramoRG" class="form-control form-control-sm" formControlName="tramo"
                            [compareWith]="compareFn">
                            <mat-option *ngFor="let item of listaTramos" [value]="item">
                                {{item.origen.nombre}},
                                {{item.origen.provincia.nombre}} ->
                                {{item.destino.nombre}},
                                {{item.destino.provincia.nombre}}
                                ({{item.km}}km)
                            </mat-option>
                        </mat-select>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-group has-float-label">
                        <label for="idPagoOrigen" class="tamanio-label">Estado</label>
                        <mat-select id="idPagoOrigen" formControlName="estado" class="form-control form-control-sm">
                            <mat-option [value]="true">Facturado</mat-option>
                            <mat-option [value]="false">Pendientes</mat-option>
                        </mat-select>
                    </div>
                </div>
                <div class="col-md-3">
                    <button id="idBotonConsultar" mat-raised-button color="primary" style="min-width: fit-content;"
                        [disabled]="!formularioFiltro.value.numeroViaje && !formularioFiltro.value.numeroRemito"
                        (click)="filtrar()">Consultar</button>
                    <button id="idBotonLimpiar" mat-raised-button color="primary" style="min-width: fit-content;"
                        [disabled]="listaCompleta.data.length == 0" (click)="limpiarConfiguracion()">Limpiar</button>
                </div>
            </div>
            <div class="row">
                <div class="tabla">
                    <div class="tabla-ancho">
                        <table mat-table [dataSource]="listaCompleta" matSort class="mat-elevation-z1">
                            <ng-container matColumnDef="NUMERO_VIAJE">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>N째 Viaje</th>
                                <td mat-cell *matCellDef="let elemento" class="number-right">
                                    {{elemento.viajeTramo.viaje.id}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="CHOFER">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Chofer</th>
                                <td mat-cell *matCellDef="let elemento">
                                    {{elemento.viajeTramo.viaje.esViajePropio? 
                                        elemento.viajeTramo.viaje.personal.alias : elemento.viajeTramo.viaje.choferProveedor.alias}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="TRAMO">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Tramo</th>
                                <td mat-cell *matCellDef="let elemento">
                                    {{elemento.viajeTramo.tramo.origen.nombre}},
                                    {{elemento.viajeTramo.tramo.origen.provincia.nombre}} ->
                                    {{elemento.viajeTramo.tramo.destino.nombre}},
                                    {{elemento.viajeTramo.tramo.destino.provincia.nombre}}
                                    ({{elemento.viajeTramo.tramo.km}} Km.)
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="NUMERO_REMITO">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>N째 Remito</th>
                                <td mat-cell *matCellDef="let elemento" class="number-right">
                                    {{elemento.viajeRemito.id}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="FECHA">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha</th>
                                <td mat-cell *matCellDef="let elemento">
                                    {{elemento.viajeRemito.fecha | date: 'dd-MM-yyyy'}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="BULTOS">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Bultos</th>
                                <td mat-cell *matCellDef="let elemento" class="number-right">
                                    {{elemento.viajeRemito.bultos}}</td>
                            </ng-container>
                            <ng-container matColumnDef="KG_EFECTIVO">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Kg. Efectivo</th>
                                <td mat-cell *matCellDef="let elemento" class="number-right">
                                    {{elemento.viajeRemito.kilosEfectivo? (elemento.viajeRemito.kilosEfectivo | number: '1.2-2') + ' Kg.' : '-'}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="VALOR_DECLARADO">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Valor Declarado</th>
                                <td mat-cell *matCellDef="let elemento" class="number-right">
                                    {{elemento.viajeRemito.valorDeclarado? '$' +(elemento.viajeRemito.valorDeclarado | number: '1.2-2') : '-'}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="REMITENTE">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Remitente</th>
                                <td mat-cell *matCellDef="let elemento">
                                    {{elemento.viajeRemito.clienteRemitente.razonSocial}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="DESTINATARIO">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Destinatario</th>
                                <td mat-cell *matCellDef="let elemento">
                                    {{elemento.viajeRemito.clienteDestinatario.razonSocial}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="SUC_ENTREGA">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Suc. Entrega</th>
                                <td mat-cell *matCellDef="let elemento">
                                    {{elemento.viajeRemito.sucursalDestino.nombre}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="OBSERVACIONES">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>-</th>
                                <td mat-cell *matCellDef="let elemento">
                                    <span (click)="verObservacionesDialogo(elemento.observaciones)"
                                        class="cursor-color">
                                        ver</span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="CHECK">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>-</th>
                                <td mat-cell *matCellDef="let elemento; let i = index">
                                    <mat-checkbox class="cursor-color" [checked]="elemento.checked"
                                        (change)="cambioCheck(elemento, i, $event)" *ngIf="elemento.mostrarCheck">
                                    </mat-checkbox>
                                    <span *ngIf="!elemento.mostrarCheck">
                                        asignado
                                    </span>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="columnas"></tr>
                            <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
                        </table>
                    </div>
                </div>
            </div>
            <br>
            <div class="row justify-content-center">
                <div class="col-md-1">
                    <button id="idBoton" mat-raised-button color="primary" [mat-dialog-close]="data"
                        *ngIf="!show">Aceptar</button>
                </div>
                <div class="col-md-1">
                    <button id="idBoton" mat-raised-button color="secondary" *ngIf="!show"
                        [mat-dialog-close]="null">Cerrar</button>
                </div>
            </div>
            <div class="row" *ngIf="show">
                <div class="col text-center">
                    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                </div>
            </div>
        </form>
    </div>
</div>