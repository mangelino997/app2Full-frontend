<div id="repartoentrante" class="row justify-content-center container-fluid">
    <div class="col-md-10 text-center">
        <form [formGroup]="formulario">
            <h5 class="text-center">Reparto Saliente</h5>
            <div class="row">
                <div class="col-md-12" style="border-style: unset; border-radius: 5px; box-shadow: 2px 2px 2px grey;">
                    <div class="row">
                        <div class="col">
                            <div class="form-group has-float-label">
                                <label for="idNumeroReparto">N° Reparto *</label>
                                <input id="idNumeroReparto" type="number" class="form-control form-control-sm" readonly
                                    [formControl]="id">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group has-float-label">
                                <label for="idFecha">Fecha *</label>
                                <input id="idFecha" type="date" class="form-control form-control-sm" readonly
                                    formControlName="fechaRegistracion">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group has-float-label margin-left">
                                <label for="idTipoViaje" class="tamanio-label">Tipo de Viaje *</label>
                                <mat-select id="idTipoViaje" class="form-control form-control-sm"
                                    [formControl]="tipoViaje" (selectionChange)="cambioTipoViaje()">
                                    <mat-option [value]="true">Propio</mat-option>
                                    <mat-option [value]=false>Tercierizado</mat-option>
                                </mat-select>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group has-float-label margin-left">
                                <label for="idTipoRemolque" class="tamanio-label">Tipo de Remol.</label>
                                <mat-select id="idTipoRemolque" class="form-control form-control-sm"
                                    [formControl]="tipoRemolque" (selectionChange)="cambioTipoRemolque()">
                                    <mat-option [value]="true">Propio</mat-option>
                                    <mat-option [value]="false">Tercierizado</mat-option>
                                </mat-select>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group has-float-label">
                                <label for="idSucursal">Sucursal *</label>
                                <input id="idSucursal" type="text" class="form-control form-control-sm" readonly
                                    [formControl]="sucursal">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group has-float-label">
                                <label for="idUsuario">Usuario *</label>
                                <input id="idUsuario" type="text" class="form-control form-control-sm" readonly
                                    [formControl]="usuario">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group has-float-label">
                                <label for="idVehiculo">Vehículo *</label>
                                <input id="idVehiculo" class="form-control form-control-sm " type="text" matInput
                                    [matAutocomplete]="autoVehiculo" required
                                    (blur)="tipoViaje.value? verificarSeleccion(formulario.get('vehiculo')) : verificarSeleccion(formulario.get('vehiculoProveedor'))"
                                    [formControl]="tipoViaje.value ? formulario.get('vehiculo') : formulario.get('vehiculoProveedor')">
                                <mat-autocomplete #autoVehiculo="matAutocomplete" [displayWith]="displayFn.bind(this)">
                                    <mat-option *ngFor="let itemVehiculo of resultadosVehiculo" [value]="itemVehiculo">
                                        {{itemVehiculo.alias}}
                                    </mat-option>
                                </mat-autocomplete>
                            </div>
                        </div>
                        <div class="col">
                            <button class="btn btn-primary btn-sm" disabled>Vtos.</button>
                            <button class="btn btn-primary btn-sm" disabled>Conf.</button>
                        </div>
                        <div class="col">
                            <div class="form-group has-float-label">
                                <label for="idRemolque">Remolque</label>
                                <input id="idRemolque" class="form-control form-control-sm " type="text" matInput
                                    [formControl]="formulario.get('vehiculoRemolque')" [matAutocomplete]="autoRemolque"
                                    (blur)="tipoRemolque.value? verificarSeleccion(formulario.get('vehiculoRemolque')) : verificarSeleccion(formulario.get('vehiculoRemolqueProveedor'))"
                                    [formControl]="tipoRemolque.value ? formulario.get('vehiculoRemolque') : formulario.get('vehiculoRemolqueProveedor')">
                                <mat-autocomplete #autoRemolque="matAutocomplete" [displayWith]="displayFn.bind(this)">
                                    <mat-option *ngFor="let itemRemolque of resultadosRemolque" [value]="itemRemolque">
                                        {{itemRemolque.alias}}
                                    </mat-option>
                                </mat-autocomplete>
                            </div>

                        </div>
                        <div class="col">
                            <button class="btn btn-primary btn-sm" disabled>Vtos.</button>
                            <button class="btn btn-primary btn-sm" disabled>Conf.</button>
                        </div>
                        <div class="col">
                            <div class="form-group has-float-label">
                                <label for="idChofer">Chofer *</label>
                                <input id="idChofer" class="form-control form-control-sm" type="text" matInput
                                    autocomplete="off" [matAutocomplete]="autoChofer" required
                                    (blur)="tipoViaje.value? verificarSeleccion(formulario.get('personal')) : verificarSeleccion(formulario.get('choferProveedor'))"
                                    [formControl]="tipoViaje.value ? formulario.get('personal') : formulario.get('choferProveedor')">
                                <mat-autocomplete #autoChofer="matAutocomplete" [displayWith]="displayFn.bind(this)">
                                    <mat-option *ngFor="let itemChofer of resultadosChofer" [value]="itemChofer">
                                        {{itemChofer.nombre}}
                                    </mat-option>
                                </mat-autocomplete>
                            </div>
                        </div>
                        <div class="col">
                            <button class="btn btn-primary btn-sm" disabled>Vtos.</button>
                            <button class="btn btn-primary btn-sm" (click)="abrirAcompaniante()">Acompañantes</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group has-float-label">
                                <label for="idZona">Zona</label>
                                <mat-select id="idZona" class="form-control form-control-sm" formControlName="zona"
                                    [compareWith]="compareFn">
                                    <mat-option *ngFor="let itemZonas of resultadosZona" [value]="itemZonas">
                                        {{itemZonas.nombre}}
                                    </mat-option>
                                </mat-select>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div class="form-group has-float-label">
                                <label for="idObservaciones">Observaciones</label>
                                <textarea type="text" class="form-control form-control-sm" maxlength="100" rows="1"
                                    formControlName="observaciones"></textarea>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <button class="btn btn-primary btn-sm" [disabled]="!formulario.valid" (click)="agregar()">
                                Agregar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-md-2">
                    <button class="btn btn-primary btn-sm">
                        Planillas Cerradas
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="tabla">
                    <div class="tabla-ancho">
                        <table mat-table [dataSource]="listaCompleta" matSort class="mat-elevation-z1">
                            <ng-container matColumnDef="numeroReparto">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>N° Reparto</th>
                                <td mat-cell *matCellDef="let elemento; let i=index">{{elemento.id}}</td>
                            </ng-container>
                            <ng-container matColumnDef="fecha">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha</th>
                                <td mat-cell *matCellDef="let elemento">
                                    {{elemento.fechaRegistracion | date: 'dd-MM-yyyy'}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="zona">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Zona</th>
                                <td mat-cell *matCellDef="let elemento">{{elemento.zona.nombre}}</td>
                            </ng-container>
                            <ng-container matColumnDef="vehiculo">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Vehículo</th>
                                <td mat-cell *matCellDef="let elemento">
                                    <span>{{elemento.vehiculo!=null ? elemento.vehiculo.alias: elemento.vehiculoProveedor.alias}}</span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="chofer">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Chofer</th>
                                <td mat-cell *matCellDef="let elemento">
                                    <span>{{elemento.personal!=null? elemento.personal.alias: elemento.choferProveedor.alias}}</span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="ordenesCombustibles">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Ordenes Combustibles</th>
                                <td mat-cell *matCellDef="let elemento">
                                    <span class="cursor-color" (click)="abrirOrdenesCombustibles()">
                                        <i class="material-icons">
                                            local_gas_station
                                        </i>
                                    </span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="adelantosEfectivos">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Adelantos Efectivo</th>
                                <td mat-cell *matCellDef="let elemento">
                                    <span class="cursor-color" (click)="abrirAdelantosEfectivo()">
                                        <i class="material-icons">
                                            attach_money
                                        </i>
                                    </span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="comprobantes">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Comprobantes</th>
                                <td mat-cell *matCellDef="let elemento">
                                    <span class="cursor-color" (click)="abrirComprobantes()">
                                        <i class="material-icons">
                                            assignment
                                        </i>
                                    </span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="cerrar">
                                <th mat-header-cell *matHeaderCellDef>-</th>
                                <td mat-cell *matCellDef="let elemento; let i=index">
                                    <span class="cursor-color" (click)="activarCerrar(i)">
                                        Cerrar
                                    </span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="eliminar">
                                <th mat-header-cell *matHeaderCellDef>-</th>
                                <td mat-cell *matCellDef="let elemento; let i=index">
                                    <span class="cursor-color-rojo" (click)="activarEliminar(i)">
                                        x
                                    </span>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="columnas"></tr>
                            <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
                        </table>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>