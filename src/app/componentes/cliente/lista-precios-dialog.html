<div class="row">
        <div class="col-md-12">
            <form [formGroup]="formulario">
                <h5 class="text-center">Listas de Precios</h5>
                <br>
                <div class="row ">
                  <div class="col-md-3">
                    <div class="form-group has-float-label">
                      <label for="idTipoOrdenVenta" class="tamanio-label">Tipo *</label>
                      <mat-select id="idTipoOrdenVenta" formControlName="tipoOrdenVenta" class="form-control form-control-sm"
                        (selectionChange)="establecerTipo()" [compareWith]="compareT" required>
                        <mat-option [value]="false">Por Empresa</mat-option>
                        <mat-option [value]="true">Por Cliente</mat-option>
                      </mat-select>
                    </div>
                  </div>
                  <div class="col-md-3" *ngIf="formulario.get('tipoOrdenVenta').value == false">
                      <div class="form-group has-float-label">
                          <label for="idEmpresa" class="tamanio-label">Empresa *</label>
                          <input id="idEmpresa" type="text" [formControl]="empresa" class="form-control form-control-sm" readonly >
                      </div>
                  </div>
                  <div class="col-md-4" *ngIf="formulario.get('tipoOrdenVenta').value == true">
                    <div class="form-group has-float-label">
                      <label for="idCliente" class="tamanio-label">Cliente *</label>
                      <input id="idCliente" class="form-control form-control-sm" type="text" matInput [readOnly]="soloLectura"
                        [formControl]="formulario.get('cliente')" [matAutocomplete]="autoCliente" autocomplete="off" 
                        (blur)="verificarSeleccion(formulario.get('cliente'))">
                      <mat-autocomplete #autoCliente="matAutocomplete" [displayWith]="displayFn.bind(this)"
                        (optionSelected)="listarOrdenesVentas('cliente')">
                        <mat-option *ngFor="let itemCliente of resultadosClientes" [value]="itemCliente">
                          {{itemCliente.alias}}
                        </mat-option>
                      </mat-autocomplete>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3">
                  <div class="form-group has-float-label">
                      <label for="idOrdenVenta" class="orden-venta-label">Orden Venta *</label>
                      <mat-select id="idOrdenVenta" class="form-control form-control-sm" [formControl]="formulario.get('ordenVenta')"
                        [compareWith]="compareFn" (selectionChange)="cambioOrdenVenta()">
                        <mat-option *ngFor="let orden of ordenesVentas" [value]="orden">
                          {{orden.nombre}} - {{orden.cliente ? orden.cliente.razonSocial : orden.empresa.razonSocial}} -
                          {{orden.vendedor.nombre}} - {{orden.activaDesde}}
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="form-group has-float-label">
                      <label for="idActivo" class="tamanio-label">Tarifa por Defecto *</label>
                      <mat-select id="idActivo" class="form-control form-control-sm" formControlName="tarifaDefecto" >
                        <mat-option [value]="false">No</mat-option>
                        <mat-option [value]="true">Si</mat-option>
                      </mat-select>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="form-group has-float-label">
                      <label for="idActivo" class="tamanio-label">Esta Activo *</label>
                      <mat-select id="idActivo" class="form-control form-control-sm" formControlName="estaActiva" 
                      [compareWith]="compareT" >
                        <mat-option [value]="false">No</mat-option>
                        <mat-option [value]="true">Si</mat-option>
                      </mat-select>
                    </div>
                  </div>
                  <div class="col-md-1">
                      <button mat-raised-button color="primary" [disabled]="!formulario.valid" (click)="agregarListaPrecio()" *ngIf="!btnMod">
                        Agregar
                      </button>
                      <button mat-raised-button color="primary" [disabled]="!formulario.valid" (click)="modificatListaPrecio()" *ngIf="btnMod">
                        Modificar
                      </button>
                  </div>
                </div>
                <div class="row justify-content-center">
                  <div class="col-md-12 text-center">
                    <table mat-table [dataSource]="listaCompleta" matSort class="mat-elevation-z1">
                      <ng-container matColumnDef="descripcion" sticky>
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Descripción</th>
                        <td mat-cell *matCellDef="let elemento">{{elemento.ordenVenta.nombre}}</td>
                      </ng-container>
                      <ng-container matColumnDef="tarifaDefecto" sticky>
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Tarifa por Defecto</th>
                        <td mat-cell *matCellDef="let elemento">{{elemento.tarifaDefecto? 'Sí' : 'No'}}</td>
                      </ng-container>
                      <ng-container matColumnDef="seguro" sticky>
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>% Seguro</th>
                        <td mat-cell *matCellDef="let elemento">% {{elemento.ordenVenta.seguro}}</td>
                      </ng-container>
                      <ng-container matColumnDef="comisionCR" sticky>
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>% Comisión C.R.</th>
                        <td mat-cell *matCellDef="let elemento">% {{elemento.ordenVenta.comisionCR}}</td>
                      </ng-container>
                      <ng-container matColumnDef="esContado" sticky>
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Es Contado</th>
                        <td mat-cell *matCellDef="let elemento">{{elemento.ordenVenta.esContado? 'Sí' : 'No'}}</td>
                      </ng-container>
                      <ng-container matColumnDef="estaActiva" sticky>
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Está Activa</th>
                        <td mat-cell *matCellDef="let elemento">{{elemento.ordenVenta.estaActiva? 'Sí' : 'No'}}</td>
                      </ng-container>
                      <ng-container matColumnDef="observaciones" sticky>
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Observaciones</th>
                        <td mat-cell *matCellDef="let elemento">{{elemento.ordenVenta.observaciones? elemento.ordenVenta.observaciones : '--'}}</td>
                      </ng-container>
                      <ng-container matColumnDef="mod" sticky >
                        <th mat-header-cell *matHeaderCellDef>-</th>
                        <td mat-cell *matCellDef="let elemento" (click)="activarModPrecio(elemento, i)"><span
                            class="cursor-color" *ngIf="!soloLectura">mod</span></td>
                      </ng-container>
                      <ng-container matColumnDef="eliminar" sticky >
                        <th mat-header-cell *matHeaderCellDef>-</th>
                        <td mat-cell *matCellDef="let elemento; let i = index;" (click)="activarEliminarPrecio(i)"><span
                            class="cursor-color" *ngIf="!soloLectura">X</span></td>
                      </ng-container>
                      <tr mat-header-row *matHeaderRowDef="columnasEscala" ></tr>
                      <tr mat-row *matRowDef="let row; columns: columnasEscala;"></tr>
                    </table>
                  </div>
                </div>
                <div class="row">
                    <div class="col-md-12 text-center">
                        <button mat-raised-button  color="accent" [mat-dialog-close]="listaPrecios">Cerrar</button>
                    </div>
                </div>
            </form>
        </div>
      </div>